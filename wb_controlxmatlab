xbox=vrjoystick(1)
forwards_motion0=wbu_motion_new('D:\Simulador WeBots\Webots\projects\robots\softbank\nao\motions\Forwards.motion');
forwards_motion1=wbu_motion_new('D:\Simulador WeBots\Webots\projects\robots\softbank\nao\motions\Forwards50.motion');
backwards_motion=wbu_motion_new('D:\Simulador WeBots\Webots\projects\robots\softbank\nao\motions\Backwards.motion');
right_rot=wbu_motion_new('D:\Simulador WeBots\Webots\projects\robots\softbank\nao\motions\TurnRight60.motion');
left_rot=wbu_motion_new('D:\Simulador WeBots\Webots\projects\robots\softbank\nao\motions\TurnLeft60.motion');
hand_wave=wbu_motion_new('D:\Simulador WeBots\Webots\projects\robots\softbank\nao\motions\HandWave.motion');
shoot=wbu_motion_new('D:\Simulador WeBots\Webots\projects\robots\softbank\nao\motions\Shoot.motion');
stand_up_front=wbu_motion_new('D:\Simulador WeBots\Webots\projects\robots\softbank\nao\motions\StandUpFromFront.motion');
% control step
TIME_STEP=32;
while wb_robot_step(TIME_STEP) ~= -1;
  [axes,buttons,povs]=read(xbox);
  LJx=axes(1);
  LJy=axes(2);
  RT=axes(3);
  A=buttons(1);
  B=buttons(2);
  X=buttons(3);
  Y=buttons(4);
  LB=buttons(5);
  RB=buttons(6);
  BACK=buttons(7);
  START=buttons(8);
  LJB=buttons(9);
  if BACK==1;
    wbu_motion_stop(forwards_motion0);
    wbu_motion_stop(forwards_motion1);
    wbu_motion_stop(backwards_motion);
    wbu_motion_stop(right_rot);
    wbu_motion_stop(left_rot);
  end
  if START==1;
    wbu_motion_play(stand_up_front);
  end
  if LJB==1;
    wbu_motion_play(hand_wave);
  end
  if A==1;
    % make the robot walk continuously
    wbu_motion_set_loop(forwards_motion0, true);
    wbu_motion_play(forwards_motion0);
  end
  if X==1;
    wbu_motion_stop(forwards_motion0);
    wbu_motion_set_loop(forwards_motion1,true)
    wbu_motion_play(forwards_motion1);
  end
  if B==1;
    wbu_motion_stop(forwards_motion1);
    wbu_motion_set_loop(backwards_motion,true);
    wbu_motion_play(backwards_motion);
  end
  if Y==1;
    wbu_motion_stop(forwards_motion0);
    wbu_motion_stop(forwards_motion1);
    wbu_motion_stop(backwards_motion);
    wbu_motion_stop(right_rot);
    wbu_motion_stop(left_rot);
    wbu_motion_play(shoot);
  end
  if RB==1;
    %wbu_motion_stop(forwards_motion0);
    %wbu_motion_stop(forwards_motion1);
    wbu_motion_stop(backwards_motion);
    wbu_motion_play(right_rot);
  end
  if LB==1;
    wbu_motion_stop(forwards_motion0);
    wbu_motion_stop(forwards_motion1);
    wbu_motion_stop(backwards_motion);
    wbu_motion_play(left_rot);
  end 
end
